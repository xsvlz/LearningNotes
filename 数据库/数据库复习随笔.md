# 数据库复习随笔

## 连接

连接也称为$\theta$连接，最常用的有**等值连接**和**自然连接**。
其中，自然连接是一种特殊的等值连接，它可以去除重复的属性列。

关系R和关系S在做自然连接的时候，可能出现关系R中的某些元组在S中不存在和它的公共属性相等的元组，反之依然。这个时候R和S就会有一些元组被舍弃，这些元组称为**悬浮元组**。

**外连接：**

把悬浮元组也保留在关系中，把原本不存在的属性填上NULL，这种连接称为外连接。

**左外连接、右外连接：**

只保留左边的悬浮元组就叫左外连接；只保留右边的悬浮元组就叫右外连接。

## 存储过程

存储过程是由过程化SQL语句书写的过程，这个过程经编译和优化后 _存储_ 在数据库服务器中，因此称它为存储过程，使用时只需要调用即可。

* 存储过程是一个预编译的代码块，执行效率比较高
* 一个存储过程替代大量SQL语句，可以降低网络通信量，提高通信速率
* 可以一定程度上确保数据安全

## 索引

[详解MySQL索引原理及优化——掘金](https://juejin.im/post/5d4d82caf265da039c6360ff#什么是索引)

### 什么是索引

索引是对数据库表中一或多个列的值进行排序的结构，是帮助MySQL高效获取数据的数据结构

也可以这样理解：索引就是加快检索表中数据的方法。数据库的索引类似于书籍的索引。在书籍中，索引允许用户不必翻阅完整个书就能迅速地找到所需要的信息。在数据库中，索引也允许数据库程序迅速地找到表中的数据，而不必扫描整个数据库。

_MySQL数据库_ 几个基本的索引类型：普通索引、唯一索引、主键索引、全文索引

### 索引的优点

* 索引加快数据库的检索速度
* 索引降低了插入、删除、修改等维护任务的速度
* 唯一索引可以确保每一行数据的唯一性
* 通过使用索引，可以在查询的过程中使用优化隐藏器，提高系统的性能
* 索引需要占物理和数据空间

### 索引的优化：

① 最左前缀匹配原则
② 对 `where`、`on`、`group by`、`order by` 中出现的列使用索引
③ 尽量选择区分度高的列作为索引
④ 对较小的数据列使用索引,这样会使索引文件更小
⑤ 对于`like`查询，`%`不要放在前面。


